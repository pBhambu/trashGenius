<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TRASHGENIUS – Ocean Plastic Heatmap</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div class="ocean-bg"></div>
    <header class="hero">
      <div class="hero-background">
        <div class="bubble bubble-1"></div>
        <div class="bubble bubble-2"></div>
        <div class="bubble bubble-3"></div>
        <div class="bubble bubble-4"></div>
        <div class="bubble bubble-5"></div>
        <div class="bubble bubble-6"></div>
        <div class="gif-fish gif-fish-1"></div>
        <div class="gif-fish gif-fish-2 gif-fish--shrimp"></div>
        <div class="gif-fish gif-fish-3"></div>
        <div class="gif-fish gif-fish-4 gif-fish--shrimp"></div>
        <div class="gif-fish gif-fish-5"></div>
        <div class="gif-fish gif-fish-6 gif-fish--shrimp"></div>
        <div class="gif-fish gif-fish-7"></div>
        <div class="gif-fish gif-fish-8 gif-fish--shrimp"></div>
      </div>

      <div class="hero-inner">
        <div class="hero-tag">TRASHGENIUS</div>
        <h1 class="hero-title">See the true impact of plastic pollution on our oceans.</h1>
        <p class="hero-subtitle">
          See how plastic travels through our oceans — in real time.
        </p>
        <div class="hero-actions">
          <a href="./map.html" class="hero-cta">Dive into the data. Explore the map now.</a>
        </div>
      </div>
    </header>
    <main class="page-content">
      <section class="content-section">
        <h2>About the Project</h2>
        <p>
          Plastic waste doesn’t disappear — it drifts. Currents carry billions of pieces of plastic
          across the globe, concentrating them in islands, gyres, and coastlines. Our interactive
          map turns complex ocean data into a clear, visual story that anyone can explore.
        </p>
        <p>
          With this tool, you can track how plastic pollution moves, where it accumulates, and how it
          affects marine environments. Whether you're a student, researcher, or someone who cares
          about the planet, this map helps you see the problem in a new way.
        </p>
      </section>

      <section class="content-section">
        <h2>How the Map Works</h2>
        <p>
          Our map uses real scientific models, ocean-current data, and environmental research to
          simulate the movement of plastic around the world.
        </p>
        <ul>
          <li>Follow plastic as it travels through major ocean currents</li>
          <li>See hotspots with the highest concentration</li>
          <li>Understand seasonal and long-term patterns</li>
          <li>Explore how human activity affects different regions</li>
        </ul>
        <p>
          The goal is simple: make the invisible data behind ocean pollution visible and easy to
          understand.
        </p>
      </section>

      <section class="content-section">
        <h2>Why It Matters</h2>
        <p>
          Every year, millions of tons of plastic enter the ocean. Much of it breaks into
          microplastics that are nearly impossible to clean up and affect everything from plankton to
          whales.
        </p>
        <p>
          By understanding how plastic spreads, we can better design solutions — from smarter waste
          management to targeted cleanup efforts.
        </p>
        <p>
          This project exists to educate, inspire action, and bring transparency to a global issue.
        </p>
      </section>

      <section class="content-section content-section--cta">
        <h2>Ready to explore?</h2>
        <p class="content-cta-text">See the flow. Understand the impact. Make a change.</p>
        <a href="./map.html" class="hero-cta content-cta">Open the live map and watch the story unfold.</a>
      </section>
    </main>
    <script>
      // Free-swimming fish animation independent of scroll.
      (function () {
        const fishNodes = Array.from(document.querySelectorAll('.gif-fish'));
        if (!fishNodes.length) return;

        const maxFish = 8;
        const fishes = fishNodes.slice(0, maxFish).map((el) => ({ el }));

        function resetFish(fish) {
          const worldHeight = Math.max(
            document.documentElement.scrollHeight,
            document.body.scrollHeight
          );
          const worldWidth = window.innerWidth + 300; // swim a bit off-screen

          fish.x = Math.random() * worldWidth;
          fish.y = Math.random() * (worldHeight - 200);

          const speed = 40 + Math.random() * 60; // px per second
          const angle = Math.random() * Math.PI * 2;
          fish.vx = Math.cos(angle) * speed;
          fish.vy = Math.sin(angle) * speed * 0.6; // slightly flatter paths
        }

        fishes.forEach(resetFish);

        let lastTime = performance.now();

        function tick(now) {
          const dt = Math.min((now - lastTime) / 1000, 0.05); // clamp for safety
          lastTime = now;

          const scrollY = window.scrollY || window.pageYOffset || 0;
          const worldHeight = Math.max(
            document.documentElement.scrollHeight,
            document.body.scrollHeight
          );
          const worldWidth = window.innerWidth + 300;

          // Separation: steer fish away from each other if they get too close.
          const separationRadius = 160; // pixels
          const separationStrength = 40; // how strongly they push apart

          for (let i = 0; i < fishes.length; i++) {
            for (let j = i + 1; j < fishes.length; j++) {
              const a = fishes[i];
              const b = fishes[j];
              const dx = a.x - b.x;
              const dy = a.y - b.y;
              const distSq = dx * dx + dy * dy;
              if (!distSq) continue;
              const dist = Math.sqrt(distSq);
              if (dist < separationRadius) {
                const overlap = separationRadius - dist;
                const nx = dx / dist;
                const ny = dy / dist;

                // Adjust velocities slightly away from each other.
                const force = (separationStrength * overlap) / separationRadius;
                a.vx += nx * force;
                a.vy += ny * force * 0.6;
                b.vx -= nx * force;
                b.vy -= ny * force * 0.6;
              }
            }
          }

          fishes.forEach((fish) => {
            fish.x += fish.vx * dt;
            fish.y += fish.vy * dt;

            const marginX = 150;
            const minY = 0;
            const maxY = worldHeight - 200;

            // Horizontal bounce / respawn
            if (fish.x < -marginX || fish.x > worldWidth) {
              resetFish(fish);
            }

            // Vertical bounds with gentle bounce
            if (fish.y < minY) {
              fish.y = minY;
              fish.vy = Math.abs(fish.vy);
            } else if (fish.y > maxY) {
              fish.y = maxY;
              fish.vy = -Math.abs(fish.vy);
            }

            // Clamp overall speed so fish don't go too fast after steering.
            const speed = Math.hypot(fish.vx, fish.vy);
            const maxSpeed = 140;
            if (speed > maxSpeed && speed > 0) {
              const scale = maxSpeed / speed;
              fish.vx *= scale;
              fish.vy *= scale;
            }

            // Facing direction: rotate to match velocity angle.
            // Base image faces left (180deg), so subtract 180deg to align.
            const angleRad = Math.atan2(fish.vy, fish.vx);
            const angleDeg = (angleRad * 180) / Math.PI;
            const rotation = angleDeg - 180;
            const screenY = fish.y - scrollY;
            const flipY = fish.vx > 0 ? -1 : 1; // flip vertically when moving right
            fish.el.style.transform = `translate(${fish.x}px, ${screenY}px) rotate(${rotation}deg) scaleY(${flipY})`;
          });

          requestAnimationFrame(tick);
        }

        requestAnimationFrame((t) => {
          lastTime = t;
          tick(t);
        });
      })();
    </script>
  </body>
</html>
