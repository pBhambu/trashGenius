<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TRASHGENIUS – Ocean Plastic Heatmap</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div class="ocean-bg"></div>
    <header class="hero">
      <div class="hero-background">
        <div class="bubble bubble-1"></div>
        <div class="bubble bubble-2"></div>
        <div class="bubble bubble-3"></div>
        <div class="bubble bubble-4"></div>
        <div class="bubble bubble-5"></div>
        <div class="bubble bubble-6"></div>
        <div class="gif-fish gif-fish-2 gif-fish--shrimp"></div>
        <div class="gif-fish gif-fish-4 gif-fish--shrimp"></div>
        <div class="gif-fish gif-fish-6 gif-fish--shrimp"></div>
        <div class="gif-fish gif-fish-8 gif-fish--shrimp"></div>
        <div class="gif-fish gif-fish-1 gif-fish--grey"></div>
        <div class="gif-fish gif-fish-3 gif-fish--grey"></div>
        <div class="gif-fish gif-fish-5 gif-fish--orange"></div>
        <div class="gif-fish gif-fish-7 gif-fish--orange"></div>
        <div class="gif-fish gif-fish-9 gif-fish--plastic-bag"></div>
        <div class="gif-fish gif-fish-10 gif-fish--plastic-bag"></div>
        <div class="gif-fish gif-fish-11 gif-fish--plastic-bag"></div>
        <div class="gif-fish gif-fish-12 gif-fish--plastic-bag"></div>
      </div>

      <div class="hero-inner">
        <h1 class="hero-main-title">TRASHGENIUS</h1>
        <h2 class="hero-title">See the true impact of plastic pollution on our oceans.</h2>
        <p class="hero-subtitle">
          See how plastic travels through our oceans — in real time.
        </p>
      </div>
    </header>
    <main class="page-content">
      <section class="content-section">
        <h2>About the Project</h2>
        <p>
          TrashGenius transforms complex ocean plastic pollution data into an interactive visual experience. 
          Our platform combines real-world scientific datasets from NOAA, Our World in Data, and KAPSARC 
          to show how plastic waste travels through ocean currents and accumulates in massive garbage patches.
        </p>
        <p>
          Explore three distinct visualization modes: heat maps showing pollution concentration hotspots, 
          land-based facilities revealing pollution sources, and complete ocean current systems that transport 
          debris across all five major oceanic gyres. Each layer provides unique insights backed by scientific research.
        </p>
      </section>

      <section class="content-section">
        <h2>How the Map Works</h2>
        <p>
          Our interactive map features three distinct visualization layers that can be toggled with 
          a single click. Each layer reveals different aspects of the global plastic pollution crisis 
          using real scientific data and research.
        </p>
        <ul>
          <li><strong>Heat Map Layer:</strong> Visualize pollution concentration across all five major garbage patches with interactive hotspot details</li>
          <li><strong>Land Facilities Layer:</strong> Explore waste treatment centers, landfills, and pollution sources from major cities worldwide</li>
          <li><strong>Ocean Currents Layer:</strong> Follow complete gyre circulation patterns that transport plastic debris across ocean basins</li>
          <li><strong>Interactive Elements:</strong> Click anywhere for detailed pollution data, facility information, or current strength analysis</li>
        </ul>
        <p>
          Switch between layers instantly with our transparent toolbar to understand the complete 
          plastic pollution ecosystem from source to accumulation.
        </p>
      </section>

      <section class="content-section">
        <h2>Why It Matters</h2>
        <p>
          Every year, millions of tons of plastic enter the ocean. Much of it breaks into
          microplastics that are nearly impossible to clean up and affect everything from plankton to
          whales.
        </p>
        <p>
          By understanding how plastic spreads, we can better design solutions — from smarter waste
          management to targeted cleanup efforts.
        </p>
        <p>
          This project exists to educate, inspire action, and bring transparency to a global issue.
        </p>
      </section>

      <section class="content-section content-section--cta">
        <h2>Ready to explore?</h2>
        <p class="content-cta-text">See the flow. Understand the impact. Make a change.</p>
        <div class="game-mode-selection">
          <a href="./map.html" class="mode-card mode-card--map">
            <div class="mode-icon">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon>
                <line x1="8" y1="2" x2="8" y2="18"></line>
                <line x1="16" y1="6" x2="16" y2="22"></line>
              </svg>
            </div>
            <h3 class="mode-title">Data Explorer</h3>
            <p class="mode-description">Multi-layer interactive map with toggleable heat maps, land-based pollution sources, and complete ocean gyre systems. Features real-time data from NOAA, KAPSARC, and scientific research databases.</p>
          </a>
          <button class="mode-card mode-card--game" disabled>
            <div class="mode-icon">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <polygon points="10,8 16,12 10,16 10,8"></polygon>
              </svg>
            </div>
            <h3 class="mode-title">Trivia Game</h3>
            <p class="mode-description">Educational game experience to learn about ocean conservation through interactive challenges. [Coming Soon]</p>
          </button>
        </div>
      </section>
    </main>
    <script>
      // Free-swimming fish animation independent of scroll.
      (function () {
        const fishNodes = Array.from(document.querySelectorAll('.gif-fish'));
        if (!fishNodes.length) return;

        const maxFish = 12;
        const fishes = fishNodes.slice(0, maxFish).map((el) => ({ el }));

        function resetFish(fish) {
          const worldHeight = Math.max(
            document.documentElement.scrollHeight,
            document.body.scrollHeight
          );
          const worldWidth = window.innerWidth + 300; // swim a bit off-screen

          fish.x = Math.random() * worldWidth;
          fish.y = Math.random() * (worldHeight - 200);

          const speed = 40 + Math.random() * 60; // px per second
          const angle = Math.random() * Math.PI * 2;
          fish.vx = Math.cos(angle) * speed;
          fish.vy = Math.sin(angle) * speed * 0.6; // slightly flatter paths
        }

        fishes.forEach(resetFish);

        let lastTime = performance.now();

        function tick(now) {
          const dt = Math.min((now - lastTime) / 1000, 0.05); // clamp for safety
          lastTime = now;

          const scrollY = window.scrollY || window.pageYOffset || 0;
          const worldHeight = Math.max(
            document.documentElement.scrollHeight,
            document.body.scrollHeight
          );
          const worldWidth = window.innerWidth + 300;

          // Separation: steer fish away from each other if they get too close.
          const separationRadius = 160; // pixels
          const separationStrength = 40; // how strongly they push apart

          for (let i = 0; i < fishes.length; i++) {
            for (let j = i + 1; j < fishes.length; j++) {
              const a = fishes[i];
              const b = fishes[j];
              const dx = a.x - b.x;
              const dy = a.y - b.y;
              const distSq = dx * dx + dy * dy;
              if (!distSq) continue;
              const dist = Math.sqrt(distSq);
              if (dist < separationRadius) {
                const overlap = separationRadius - dist;
                const nx = dx / dist;
                const ny = dy / dist;

                // Adjust velocities slightly away from each other.
                const force = (separationStrength * overlap) / separationRadius;
                a.vx += nx * force;
                a.vy += ny * force * 0.6;
                b.vx -= nx * force;
                b.vy -= ny * force * 0.6;
              }
            }
          }

          fishes.forEach((fish) => {
            fish.x += fish.vx * dt;
            fish.y += fish.vy * dt;

            const marginX = 150;
            const minY = 0;
            const maxY = worldHeight - 200;

            // Horizontal bounce / respawn
            if (fish.x < -marginX || fish.x > worldWidth) {
              resetFish(fish);
            }

            // Vertical bounds with gentle bounce
            if (fish.y < minY) {
              fish.y = minY;
              fish.vy = Math.abs(fish.vy);
            } else if (fish.y > maxY) {
              fish.y = maxY;
              fish.vy = -Math.abs(fish.vy);
            }

            // Clamp overall speed so fish don't go too fast after steering.
            const speed = Math.hypot(fish.vx, fish.vy);
            const maxSpeed = 140;
            if (speed > maxSpeed && speed > 0) {
              const scale = maxSpeed / speed;
              fish.vx *= scale;
              fish.vy *= scale;
            }

            // Facing direction: rotate to match velocity angle.
            // Base image faces right (0deg), so use angle directly.
            const angleRad = Math.atan2(fish.vy, fish.vx);
            const angleDeg = (angleRad * 180) / Math.PI;
            const rotation = angleDeg;
            const screenY = fish.y - scrollY;
            const flipY = fish.vx < 0 ? -1 : 1; // flip vertically when moving left
            fish.el.style.transform = `translate(${fish.x}px, ${screenY}px) rotate(${rotation}deg) scaleY(${flipY})`;
          });

          requestAnimationFrame(tick);
        }

        requestAnimationFrame((t) => {
          lastTime = t;
          tick(t);
        });
      })();
    </script>
  </body>
</html>